import os
import requests

## GET the access token
# Prepare the request payload
token_url = os.getenv('AICORE_AUTH_URL')
payload = {
    'grant_type': 'client_credentials',
    'client_id': os.getenv('AICORE_CLIENT_ID'),
    'client_secret': os.getenv('AICORE_CLIENT_SECRET')
}
# Make the request
response = requests.post(token_url, data=payload)

# Parse the token
if response.status_code == 200:
    access_token = response.json().get('access_token')
else: 
    print("Failed to get token:", response.status_code)
    print("Error message:", response.json().get('error_description'))


os.environ["AICORE_CLIENT_TOKEN"]='Bearer' +' '+ access_token


print (access_token)

print ("--------")